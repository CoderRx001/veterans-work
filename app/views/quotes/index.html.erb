<h1>My Quotes</h1>
<button id="declinedBtn">Declined Quote</button> <button id="completed">Completed Request</button>
<% if current_customer %>
  <%= render 'customer_quotes' %>
<% elsif current_company %>
  <%= render 'company_quotes' %>
<% else @quotes %>
<% end %>

<div id="declined" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <table id="declined_quotes" class="table table-hover table-condensed">
          <thead>
            <tr>
              <th>Request Description</th>
              <th>Request Expires</th>              
              <th>Company</th>
              <th>Start Date</th>
              <th>Completion Date Estimate</th>
              <th>Total Cost Estimate</th>
              <th>Quote Details</th>
            </tr>
          </thead>
          <tbody>
          <% @rejected_quotes.each do |rejected_quote| %>
            <tr>
              <td><%= rejected_quote.customer_request.description %></td>
              <td><%= rejected_quote.customer_request.expires_date %></td>              
              <td><%= rejected_quote.company.name%></td>
              <td><%= rejected_quote.start_date.strftime("%B %e, %Y") %></td>
              <td><%= rejected_quote.completion_date_estimate.strftime("%B %e, %Y")%></td>
              <td><%= number_to_currency(rejected_quote.total_cost_estimate) %></td>
              <td><a href="/quotes/<%= rejected_quote.id %>"><button class="btn btn-success">Details</button></a></td>
            </tr>
          <% end %>
          </tbody>
        </table>
  </div>
</div>
<div id="completed"></div>

<script type="text/javascript">
  // Get the modal
  var modal = document.getElementById('declined');

  // Get the button that opens the modal
  var btn = document.getElementById("declinedBtn");

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // When the user clicks on the button, open the modal 
  btn.onclick = function() {
    modal.style.display = "block";
  }

  // When the user clicks on <span> (x), close the modal
  span.onclick = function() {
    modal.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
       modal.style.display = "none";
    }
  }
</script>